# Redis with Docker

This document explains how to pull the official Redis image from Docker Hub and run it as a container using the Docker CLI.

## What is Redis?
- **Redis** (Remote Dictionary Server) is an open-source, in-memory data structure store.
- It's commonly used as a **cache**, **message broker**, and **database**.
- Known for its speed and flexibility.

## Why Use Redis with Docker?
- **Easy Setup**: Quickly deploy Redis without manual installation.
- **Isolation**: Run Redis in a containerized environment, separate from other services.
- **Consistency**: Ensures the same Redis environment across development, testing, and production.
- **Scalability**: Easily scale Redis instances using Docker orchestration tools (like Docker Compose or Kubernetes).

## 1. Pulling the Redis Image

Use the `docker pull` command to download the official Redis image from Docker Hub.

```bash
docker pull redis
```
*Note: This command downloads the latest stable version of Redis.*

To pull a specific version:
```bash
docker pull redis:7.0
```

## 2. Creating and Running a Redis Container

Use the `docker run` command to create and start a new container from the Redis image.

```bash
docker run --name my-redis-container -d -p 6379:6379 redis
```

**Command Breakdown:**
- `docker run`: Command to create and run a new container.
- `--name my-redis-container`: Assigns a custom name (`my-redis-container`) to the container for easy reference.
- `-d`: Runs the container in detached mode (in the background).
- `-p 6379:6379`: Maps port `6379` on the host machine to port `6379` inside the container (Redis default port).
- `redis`: Specifies the image to use for the container.

## 3. Connecting to the Redis Container

You can connect to the running Redis container using the Redis CLI tool (`redis-cli`) within the container itself.

```bash
docker exec -it my-redis-container redis-cli
```

**Command Breakdown:**
- `docker exec`: Command to execute a command inside a running container.
- `-it`: Allocates a pseudo-TTY connected to the container's stdin; `-i` for interactive, `-t` for TTY.
- `my-redis-container`: The name of the target container.
- `redis-cli`: The command to run inside the container (the Redis command-line interface).

Once connected, you can run Redis commands:
```redis-cli
127.0.0.1:6379> PING
PONG
127.0.0.1:6379> SET mykey "Hello Redis"
OK
127.0.0.1:6379> GET mykey
"Hello Redis"
127.0.0.1:6379> exit
```

## 4. Viewing Container Logs

To see the logs generated by the Redis container:

```bash
docker logs my-redis-container
```

To follow the logs in real-time:
```bash
docker logs -f my-redis-container
```

## 5. Stopping and Removing the Container

**To stop the container:**

```bash
docker stop my-redis-container
```

**To remove the stopped container:**

```bash
docker rm my-redis-container
```

**To stop and remove the container in one command:**

```bash
docker rm -f my-redis-container
```
*Note: The `-f` flag forces the removal of a running container.*

## Persisting Data (Optional)

By default, data stored in Redis inside the container is lost when the container is removed. To persist data, you can use Docker volumes:

```bash
docker run --name my-redis-persistent -d -p 6379:6379 -v redis_data:/data redis redis-server --save 60 1 --loglevel warning
```

**Command Breakdown:**
- `-v redis_data:/data`: Creates a named volume `redis_data` and mounts it to the `/data` directory inside the container, where Redis stores its data.
- `redis-server --save 60 1 --loglevel warning`: Additional arguments passed to the Redis server command inside the container (e.g., configure saving snapshots).

The `redis_data` volume will persist even if the container is removed and can be reused by a new Redis container.

## Using Redis Stack (Redis + Modules + RedisInsight)

**Redis Stack** bundles open-source Redis with powerful modules (like RediSearch, RedisJSON, RedisTimeSeries, RedisBloom, RedisGraph) and includes RedisInsight, a GUI tool for visualizing and interacting with your Redis data.

### 1. Pulling the Redis Stack Image

Use `docker pull` to get the Redis Stack image:

```bash
docker pull redis/redis-stack:latest
```
Note: redis/redis-stack-server provides only the server and modules without RedisInsight.

### 2. Creating and Running a Redis Stack Container
Use docker run to start a Redis Stack container. This command also exposes the RedisInsight web UI port (8001).

Command Breakdown:

- docker run : Command to create and run a new container.
- -d : Runs the container in detached mode.
- --name my-redis-stack : Assigns a name to the container.
- -p 6379:6379 : Maps the host port 6379 to the container port 6379 (for Redis).
- -p 8001:8001 : Maps the host port 8001 to the container port 8001 (for RedisInsight).
- redis/redis-stack:latest : Specifies the Redis Stack image.
### 3. Accessing RedisInsight
Once the container is running, you can access the RedisInsight GUI by navigating to http://localhost:8001 in your web browser.

### 4. Connecting via redis-cli
You can still connect using redis-cli as with the standard Redis container:

```bash
docker exec -it my-redis-stack redis-cli
```

You can then test the included modules, for example, RedisJSON:

```redis-cli
127.0.0.1:6379> JSON.SET mydoc $ '{"name":"Test", "value": 123}'
OK
127.0.0.1:6379> JSON.GET mydoc $.name
"[\"Test\"]"
127.0.0.1:6379> exit
```

### 5. Stopping and Removing the Redis Stack Container
The commands are the same as for a standard Redis container, just use the correct container name:

```bash
docker stop my-redis-stack
 ```

```bash
docker rm my-redis-stack
 ```
---
>## Install redis with redis-stack
```cmd
docker run -d --name redis-stack -p 6379:6379 -p 8001:8001 redis/redis-stack:latest
```